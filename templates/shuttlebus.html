<!DOCTYPE html>
<html lang="en">    
    <head>
        <meta charset="utf-8">
        <title>University Of Toronto Shuttle Bus Map</title>
        <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="http://fezvrasta.github.io/bootstrap-material-design/dist/css/ripples.min.css" rel="stylesheet">

        <link href="http://fezvrasta.github.io/bootstrap-material-design/dist/css/material-wfont.min.css" rel="stylesheet">
        <link href="http://fezvrasta.github.io/snackbarjs/dist/snackbar.min.css" rel="stylesheet">
                
        <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Google Map  -->
        <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBeId-aJWa_EA6FwqCbDJOjjLL6Qe1gr9E&sensor=false">
        </script>        
        <!-- End Google Map  -->

    </head>
    <body>
        <div id="wrap">

        <!-- NAVABAR-->
        <div class="navbar navbar-inverse navbar-fixed-top">
          <div class="container">
            <div class="navbar-header">                                   
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  
                </button>
                <a class="navbar-brand" href="">UFT Home</a>
            </div>
            <div id="collapsable_menu_navbar" class="navbar-collapse collapse">  
                <ul class="nav navbar-nav visible-xs">
                    {% for bus in buses_geo %} 
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-bottom: 0.5em;">
                            
                                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-6" style="padding-right: 0px;padding-left: 0px;">
                                    
                                        <span class="label label-danger">Bus#{{ bus['bus_id'] }} to {{ bus['stops_list'][bus['next_stop_index']][0] }}({{ bus['status'] }})</span>
                                        <span class="label label-warning" id="distance_menu{{ bus['bus_id'] }}"></span>
                                        <span class="label label-warning" id="duration_menu{{ bus['bus_id'] }}"></span>
                                        <span class="label label-warning">Seats To Be Taken: {{ seats_by_bus[bus['bus_id']] }}</span>
                                        
                                    
                                </div>
                                <div class="col-xs-8 col-sm-6 col-md-6 col-lg-6" style="float: right;" >
                                    
                                        <button                                             
                                            onclick="unCollapseMenu(); triggerMarker({{ bus['bus_id'] }})"
                                            type="button" class="btn btn-primary"  style="margin-bottom: 1em; margin-top: 0em;padding-left: 10px;padding-right: 10px;margin-right: 0px;margin-left: 0px;">
                                            Show On Map
                                        </button>
                                                                        
                                        <button                                             
                                            onclick="unCollapseMenu(); addUserCount({{ bus['bus_id'] }})"
                                            type="button" class="btn btn-success" style="margin-bottom: 1em; margin-top: 0em;padding-left: 10px;padding-right: 10px;margin-right: 0px;margin-left: 0px;" 
                                            {% if bus['status'] == 'inactive' %} 
                                               disabled 
                                            {% endif %}
                                            >Add Me
                                        </button>
                                    
                                   
                                
                                 </div>
                            
                        </div>

                   {% endfor %}
                   
                </ul>
            </div>                           
          </div>
        </div>
        <!-- END NAVABAR-->

        <div class="container">
                    <div class="row">

                        <div class="col-md-12">
                            <hr class="soften" style='margin-bottom: 0px;'>

                            <div class="container well bs-component" style="padding-top: 15px;">  
                                
                                <div id="map-canvas" class="col-sm-12 col-md-12 col-lg-12"
                                     style="height:500px;"></div>
                            </div> <!-- /container -->
                                
                            <div class="col-lg-12 visible-sm visible-md visible-lg">
                                {% for bus in buses_geo %}  
                                    <div class="col-sm-6 col-md-6 col-lg-4">
                                    {% if bus['status'] == 'active' %}                                    
                                        <div onclick="triggerMarker({{ bus['bus_id'] }})">
                                            <div class="panel panel-success">
                                    {% else %}
                                        <div onclick="">    
                                            <div class="panel panel-warning">
                                    {% endif %}
                                                <div class="panel-heading" style="text-align: center;">
                                                    <h3>
                                                        Shuttle Bus #{{ bus['bus_id'] }} to {{ bus['stops_list'][bus['next_stop_index']][0] }} Campus 
                                                    </h3>
                                                </div>
                                                <div class="panel-body" style="text-align: center;">
                                                    <h5>Status: {{ bus['status'] }}</h5>
                                                    <h5 id="distance{{ bus['bus_id'] }}"></h5>
                                                    <h5 id="duration{{ bus['bus_id'] }}"></h5>
                                                    <h5>Seats To Be Taken: {{ seats_by_bus[bus['bus_id']] }}
                                                        <button class="btn btn-warning" style="margin-top: 0px; 
                                                                                                margin-left: 0px;
                                                                                                margin-bottom: 0px;
                                                                                                margin-right: 0px;
                                                                                                padding-right: 2px;
                                                                                                padding-left: 2px;
                                                                                                padding-top: 0px;
                                                                                                padding-bottom: 0px;"
                                                        data-toggle="tooltip" data-placement="right" title="" data-original-title="{{ tooltips['?'] }}" type="button">?</button>
                                                    </h5>
                                                </div>
                                                <div class="panel-footer">
                                                    <button style="margin:0 auto;display:block;" type="button" class="btn btn-primary" onclick="addUserCount({{ bus['bus_id'] }})" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{ tooltips['btn'] }}" >
                                                        Add Myself To Next Bus
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>                        
                                    
                                {% endfor %}  
                            </div>                  

                        
                        </div><!--/row-->
                    </div>
        </div><!--/container-->

        <hr class="soften">
        </div>

        
        <div id="footer">
             University of Toronto Shuttle Buses - The smartest way to get around.
        </div>

        
        
        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

        
        <script type="text/javascript" src="{{ url_for('static', filename='js/main.js') }}"></script>        

        <script>
            var GLOB_BUSES = {{ buses_geo|tojson|safe }}
            var GLOB_STOPS = {{ stops_geo|tojson|safe }}
            var GLOB_MAP_STYLE = {{ map_style_aray|tojson|safe }}
        </script>

    </body>
</html>
